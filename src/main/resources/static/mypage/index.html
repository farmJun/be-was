<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link href="../reset.css" rel="stylesheet"/>
    <link href="../global.css" rel="stylesheet"/>
    <script>
        function triggerFileUpload() {
            document.getElementById('profile-input').click();
        }

        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function () {
                const output = document.getElementById('current-profile-img');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
        }
    </script>
</head>
<body>
<div class="container">
    <header class="header">
        <a href="/"><img src="../img/signiture.svg"/></a>
        <ul class="header__menu">
            {{HEADER_MENU}}
        </ul>
    </header>
    <div class="page">
        <h2 class="page-title">마이페이지</h2>

        <form class="form" method="POST" action="/user/update" enctype="multipart/form-data">
            <div class="profile_container">
                <div class="profile_box">
                    <div class="profile_image">
                        <img id="current-profile-img" class="profile" src="{{profileImage}}">
                    </div>
                    <div class="profile_frame">
                        <div class="btn_profile" onclick="triggerFileUpload()">
                            <div class="btn_container">수정</div>
                        </div>
                        <div class="btn_bar"></div>
                        <div class="btn_profile">
                            <div class="btn_container">삭제</div>
                        </div>
                    </div>
                </div>

                <input type="file" id="profile-input" name="profileImage" style="display: none;"
                       onchange="previewImage(event)" accept="image/*"/>

                <div class="textfield textfield_size_s input_margin">
                    <p class="title_textfield">닉네임</p>
                    <input
                            class="input_textfield"
                            name="nickname"
                            value="{{nickname}}"
                            placeholder="변경할 닉네임을 입력하세요"
                            autocomplete="username"
                    />
                </div>
                <div class="textfield textfield_size_s">
                    <p class="title_textfield">비밀번호</p>
                    <input
                            class="input_textfield"
                            name="password"
                            type="password"
                            placeholder="비밀번호를 변경할 경우 입력해주세요"
                            autocomplete="new-password"
                    />
                </div>

                <button
                        id="registration-btn"
                        class="btn btn_contained btn_size_m input_margin"
                        type="submit"
                >
                    변경사항 저장
                </button>
            </div>
        </form>
    </div>
</div>
</body>
</html>